<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SmartFlow Admin</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main class="container">
    <section class="card">
      <h1>Leads</h1>
      <p class="tagline">Viewing <code>data.csv</code> via <code>/api/leads</code></p>
      <div id="leads"></div>
    </section>
  </main>
  <script>
    async function loadLeads(){
      const res = await fetch("/api/leads");
      const data = await res.json();
      const box = document.getElementById("leads");
      if (!data.ok) { box.textContent = "Failed to load."; return; }
      if (!data.rows.length) { box.textContent = "No leads yet."; return; }
      const table = document.createElement("table");
      table.style.width = "100%";
      table.style.borderCollapse = "collapse";
      const thead = document.createElement("thead");
      thead.innerHTML = "<tr><th>Time (UTC)</th><th>Name</th><th>Email</th><th>Message</th></tr>";
      table.appendChild(thead);
      const tbody = document.createElement("tbody");
      data.rows.forEach(r=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${r.timestamp||""}</td><td>${r.name||""}</td><td>${r.email||""}</td><td>${r.message||""}</td>`;
        [...tr.children].forEach(td=>{td.style.borderBottom="1px solid #1f1f1f"; td.style.padding="8px";});
        tbody.appendChild(tr);
      });
      table.appendChild(tbody);
      box.appendChild(table);
    }
    loadLeads();
  </script>
</body>
</html>